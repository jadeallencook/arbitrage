(()=>{"use strict";const e=()=>{const e=document.querySelector("h1").innerText,t=Number(window.location.href.split("/")[4]),i=Number(document.querySelector("p.wt-text-title-03").innerText.replace(/[^\d.-]/g,"")),n=document.querySelector('[data-id="description-text"')?document.querySelector('[data-id="description-text"').innerText:document.querySelector("#wt-content-toggle-product-details-read-more > p")?document.querySelector("#wt-content-toggle-product-details-read-more > p").innerText:"No description available",o=(()=>{let e=[];const t=document.querySelector("ul.carousel-pane-list").children;for(let i of t){const{src:t}=i.childNodes[1];!t||-1===t.indexOf("jpg")&&-1===t.indexOf("jpeg")||(e=[...e,t])}return e})(),r=!!document.querySelectorAll("p.wt-text-caption.wt-position-relative")[1];return new class{constructor({id:e,title:t,price:i,description:n,photos:o,freeShipping:r}){this.id=e||0,this.title=t||"",this.price=i||0,this.description=n||"",this.photos=o||[],this.posted=!1,this.freeShipping=r||!1}}({title:e,id:t,price:i,description:n,photos:o,freeShipping:r})},t=()=>alert("Feature not yet implemented...");chrome.extension.sendMessage({},(function(i){var n=setInterval((function(){if("complete"===document.readyState){clearInterval(n);const i=window.location.href.split("/"),o=chrome.storage.sync;if("www.etsy.com"===i[2]&&"listing"===i[3]){const i=e();o.get(null,(e=>{const n=!!e[i.id],{button:r}=(()=>{const e=document.createElement("button"),t=document.querySelector("#variations");return e.classList.add("wt-btn"),e.classList.add("wt-btn--filled"),e.classList.add("wt-width-full"),e.innerText="Add to Arbitrage",e.style.marginTop="15px",t.appendChild(e),{button:e}})();n?(r.innerText="Remove from Arbitrage",r.onclick=t):r.onclick=()=>{o.set({[i.id]:i},(()=>{r.innerText="Refresh to remove",r.disabled=!0}))}}))}}}),10)}))})();